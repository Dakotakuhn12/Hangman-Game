<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hangman</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../styles/style.css" />
    <style>
      #room-log {
        border: 1px solid #ccc;
        padding: 10px;
        height: 120px;
        overflow-y: scroll;
        margin-top: 10px;
        background-color: #f9f9f9;
        border-radius: 5px;
      }
      #room-log div {
        padding: 2px 0;
        border-bottom: 1px solid #eee;
        font-size: 0.9em;
      }
      #room-log div:last-child {
        border-bottom: none;
      }
      #room-controls {
        margin-bottom: 15px;
        padding: 10px;
        background: #f5f5f5;
        border-radius: 5px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
      }
      #room-controls label {
        margin-right: 5px;
      }
      #room-controls input {
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      #room-controls button {
        padding: 5px 10px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      #room-controls button:hover {
        background: #3a56d4;
      }
      .chooser-letter {
        color: #4a90e2;
        font-weight: bold;
      }
      .player-list-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 5px;
      }
      .player-creator {
        color: #ff9800;
      }
      .player-chooser {
        color: #2196f3;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>Hangman Game</h1>

      <!-- Room controls -->
      <div id="room-controls">
        <label>
          Username:
          <input
            type="text"
            id="username"
            placeholder="Enter username"
            value="Player_1"
          />
        </label>
        <button id="create-room-btn">Create Room</button>
        <button id="join-room-btn">Join Room</button>
        <button id="leave-room-btn">Leave Room</button>
        <button id="start-game-btn">Start Game</button>
        <p>Room Code: <span id="room-code">None</span></p>
      </div>

      <div id="room-log-container">
        <h3>Room Activity</h3>
        <div id="room-log"></div>
      </div>

      <div>
        <h3>Players in Room:</h3>
        <ul id="player-list"></ul>
      </div>

      <div class="game-status">
        <p id="remaining-guesses">Remaining guesses: 6</p>
        <label for="difficulty">Choose A difficulty</label>
        <select id="difficulty_drop" name="difficulty">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
          <option value="advanced">Advanced</option>
        </select>
        <p id="category">Category: General</p>
      </div>

      <div class="hangman-container">
        <svg id="hangman-svg" width="200" height="200" viewBox="0 0 200 200">
          <!-- Gallows -->
          <line
            x1="20"
            y1="180"
            x2="100"
            y2="180"
            stroke="#333"
            stroke-width="4"
          />
          <line
            x1="60"
            y1="180"
            x2="60"
            y2="20"
            stroke="#333"
            stroke-width="4"
          />
          <line
            x1="60"
            y1="20"
            x2="140"
            y2="20"
            stroke="#333"
            stroke-width="4"
          />
          <line
            x1="140"
            y1="20"
            x2="140"
            y2="40"
            stroke="#333"
            stroke-width="4"
          />
          <!-- Hangman parts -->
          <circle
            id="head"
            cx="140"
            cy="60"
            r="20"
            stroke="#333"
            stroke-width="3"
            fill="transparent"
            style="display: none"
          />
          <line
            id="body"
            x1="140"
            y1="80"
            x2="140"
            y2="130"
            stroke="#333"
            stroke-width="3"
            style="display: none"
          />
          <line
            id="left-arm"
            x1="140"
            y1="100"
            x2="110"
            y2="90"
            stroke="#333"
            stroke-width="3"
            style="display: none"
          />
          <line
            id="right-arm"
            x1="140"
            y1="100"
            x2="170"
            y2="90"
            stroke="#333"
            stroke-width="3"
            style="display: none"
          />
          <line
            id="left-leg"
            x1="140"
            y1="130"
            x2="120"
            y2="160"
            stroke="#333"
            stroke-width="3"
            style="display: none"
          />
          <line
            id="right-leg"
            x1="140"
            y1="130"
            x2="160"
            y2="160"
            stroke="#333"
            stroke-width="3"
            style="display: none"
          />
          <g id="face" style="display: none">
            <line
              x1="130"
              y1="55"
              x2="135"
              y2="60"
              stroke="#333"
              stroke-width="2"
            />
            <line
              x1="135"
              y1="55"
              x2="130"
              y2="60"
              stroke="#333"
              stroke-width="2"
            />
            <line
              x1="145"
              y1="55"
              x2="150"
              y2="60"
              stroke="#333"
              stroke-width="2"
            />
            <line
              x1="150"
              y1="55"
              x2="145"
              y2="60"
              stroke="#333"
              stroke-width="2"
            />
            <path
              d="M130 70 Q140 80 150 70"
              stroke="#333"
              stroke-width="2"
              fill="transparent"
            />
          </g>
        </svg>
      </div>

      <div class="word-display" id="word-display"></div>
      <div class="keyboard" id="keyboard"></div>
      <div class="game-message" id="game-message"></div>

      <button id="reset-btn" class="reset-btn">
        <i class="fas fa-redo"></i> New Game
      </button>
    </div>

    <!-- Word Selection Modal -->
    <div id="word-selection-modal" class="modal" style="display: none">
      <div class="modal-content">
        <h2>Choose a Word</h2>
        <p>You are the word chooser! Select a word from the list below:</p>

        <div class="search-container">
          <input type="text" id="word-search" placeholder="Search words..." />
          <select id="category-filter">
            <option value="all">All Categories</option>
            <option value="Animals">Animals</option>
            <option value="Food">Food</option>
            <option value="Movies">Movies</option>
            <option value="Countries">Countries</option>
            <option value="Science">Science</option>
            <option value="Programming">Programming</option>
            <option value="Sports">Sports</option>
            <option value="Music">Music</option>
            <option value="Geography">Geography</option>
          </select>
        </div>

        <div id="words-container" class="words-grid">
          <!-- Words will be loaded here -->
        </div>

        <div class="selected-word-info">
          <p>Selected: <span id="selected-word-text">None</span></p>
          <p>Category: <span id="selected-category-text">General</span></p>
          <input
            type="text"
            id="custom-category"
            placeholder="Or enter custom category"
          />
        </div>

        <div class="modal-buttons">
          <button id="submit-selected-word" class="submit-btn">
            Submit Word
          </button>
          <button id="random-word" class="secondary-btn">Pick Random</button>
          <button id="refresh-words" class="secondary-btn">
            Refresh Words
          </button>
          <button id="cancel-word-selection" class="cancel-btn">Cancel</button>
        </div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="../scripts/scriptMultiplayer.js"></script>
  </body>
</html>
